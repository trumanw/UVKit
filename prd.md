# UV-Vis光谱数据分析与可视化程序 - 产品需求文档

## 1. 产品概述

### 产品名称
UVKit - UV-Vis光谱数据分析与可视化平台

### 产品定位
基于Web的UV-Vis光谱数据批量处理、分析和可视化工具，专为化学、材料科学等领域的科研人员设计。

### 核心价值
- 简化UV-Vis光谱数据的批量处理流程
- 提供直观的光谱数据可视化界面
- 通过Spectral Angle Mapper算法实现光谱相似度分析
- 支持多实验结果的对比分析

## 2. 目标用户

### 主要用户群体
- **科研人员**：化学、材料科学、生物化学等领域的实验室研究人员
- **质量控制人员**：需要批量分析样品光谱数据的QC工程师
- **学生**：进行光谱分析相关实验的学生

## 3. 功能需求

### 3.1 数据导入功能

#### CSV文件批量导入
- 支持上传CSV格式的UV-Vis光谱数据文件
- 数据格式：第一列为波长，第二列开始为各实验的吸光度数据
- 文件限制：最大50MB，支持.csv格式
- 数据验证：自动检测格式、验证波长连续性、检查数据有效性

#### 参考光谱数据上传
- 支持上传单个参考光谱数据文件
- 作为相似度计算的基准光谱

### 3.2 数据可视化功能

#### 光谱曲线显示
- 交互式图表显示所有光谱数据
- X轴：波长（nm），Y轴：吸光度
- 多条光谱曲线同时显示，支持颜色自定义
- 支持图例显示/隐藏

#### 光谱数据筛选
- 按波长范围筛选
- 按实验编号筛选
- 按相似度阈值筛选
- 支持多条件组合筛选

#### 交互式操作
- 鼠标悬停显示数据点信息
- 支持图表缩放和平移
- 支持数据点选择
- 支持图表导出（PNG、SVG格式）

### 3.3 光谱相似度分析

#### Spectral Angle Mapper算法
- 计算两个光谱向量之间的夹角余弦值
- 公式：SAM = arccos(∑(A_i × B_i) / √(∑A_i² × ∑B_i²))
- 输出：相似度值（0-1之间，1表示完全相同）
- 特点：对光谱形状变化敏感，适用于光谱模式识别

#### 余弦相似度算法
- 计算两个光谱向量之间的余弦相似度
- 公式：Cosine Similarity = ∑(A_i × B_i) / √(∑A_i² × ∑B_i²)
- 输出：相似度值（-1到1之间，1表示完全相同，-1表示完全相反）
- 特点：衡量光谱向量的方向相似性，对幅度变化不敏感

#### 皮尔逊相关系数算法
- 计算两个光谱数据序列的线性相关性
- 公式：Pearson = ∑((A_i - Ā)(B_i - B̄)) / √(∑(A_i - Ā)² × ∑(B_i - B̄)²)
- 输出：相关系数值（-1到1之间，1表示完全正相关，-1表示完全负相关）
- 特点：衡量光谱数据的线性关系，对异常值敏感

#### 批量相似度计算
- 计算所有光谱与参考光谱的相似度
- 支持三种算法并行计算：SAM、余弦相似度、皮尔逊相关系数
- 数据预处理：波长对齐、数据标准化
- 生成多算法对比的相似度报告

#### 相似度结果展示
- 多算法相似度数值对比表格
- 各算法相似度分布直方图
- 算法间相关性分析图表
- 相似度阈值筛选（支持多算法组合筛选）
- 算法性能对比分析

### 3.4 数据导出功能

#### 分析结果导出
- 支持Excel、CSV、PDF格式导出
- 包含原始数据、相似度计算结果、筛选后数据

#### 图表导出
- 支持PNG、SVG、PDF格式导出

## 4. 用户界面设计

### 整体布局
- **侧边栏**：数据上传、参数设置、筛选条件
- **主界面**：数据可视化图表、分析结果展示
- **底部区域**：数据统计信息、操作日志

### 页面结构
1. **数据上传页面**：文件上传区域、数据预览、验证结果
2. **可视化分析页面**：光谱曲线图表、相似度分析结果、筛选控件
3. **结果导出页面**：导出选项设置、进度显示、下载链接

## 5. 技术实现

### 技术栈
- **前端框架**：Streamlit
- **可视化库**：Plotly
- **数据处理**：Pandas, NumPy
- **算法实现**：Scikit-learn

### 核心算法
- Spectral Angle Mapper：光谱相似度计算
- 数据预处理：波长对齐、数据标准化
- 可视化算法：多光谱曲线绘制

### 性能要求
- 响应时间：页面加载 < 3秒
- 数据处理：支持1000+光谱数据同时处理
- 内存使用：优化大数据集的内存占用

## 6. 数据安全与隐私

### 数据保护
- 本地处理：所有数据在用户本地处理，不上传服务器
- 临时存储：数据仅在会话期间临时存储
- 自动清理：会话结束后自动清理临时数据

### 文件安全
- 文件验证：严格验证上传文件格式和内容
- 大小限制：防止恶意大文件上传

## 7. 用户体验要求

### 易用性
- 零学习成本：界面直观，无需培训即可使用
- 操作简单：最少点击次数完成常用操作
- 错误提示：清晰的错误信息和解决建议

### 性能体验
- 快速响应：所有操作响应时间 < 1秒
- 进度提示：长时间操作显示进度条
- 后台处理：大数据处理不阻塞界面

## 8. 测试要求

### 功能测试
- 数据导入测试：各种格式CSV文件的导入
- 算法测试：SAM算法的准确性验证
- 可视化测试：图表显示的正确性

### 性能测试
- 大数据集测试：1000+光谱数据的处理性能
- 内存测试：大数据集的内存使用情况

## 9. 成功指标

### 功能指标
- 数据处理能力：支持1000+光谱数据同时处理
- 算法准确性：SAM算法计算结果与标准工具一致
- 可视化质量：图表清晰、信息丰富

### 用户体验指标
- 用户满意度：用户满意度 > 90%
- 操作效率：完成标准任务时间减少50%
- 错误率：用户操作错误率 < 5%

## 10. 风险评估

### 技术风险
- 大数据处理性能：大数据集可能导致性能问题
- 算法准确性：SAM算法在不同数据条件下的准确性

### 缓解措施
- 性能优化：采用高效算法和数据结构
- 用户培训：提供详细文档和教程
- 渐进式功能：分阶段发布功能，收集用户反馈

## 11. 后续规划

### 功能扩展
- 更多算法支持：添加其他光谱相似度算法
- 数据预处理：增加数据清洗和预处理功能
- 报告生成：自动生成分析报告

### 平台扩展
- 移动端支持：开发移动端应用
- API接口：提供RESTful API接口
- 插件系统：支持第三方插件扩展
